%Based on RTU EEF guidelines for bachelor thesis
%https://www.rtu.lv/writable/public_files/RTU_025.pdf

\documentclass[12pt,fleqn,titlepage,oneside]{article}

\input{thesis_formatting_rtu}

\begin{document}
\begin{titlepage}
	\centering
	\doublespacing
	
	{\Large\MakeUppercase{\textbf{Rīgas Tehniskā Universitāte}}\par}
	
	\vspace*{\fill}
	
	{\Huge\MakeUppercase{\textbf{Bakalaura darbs ar projekta daļu}}\par}
	
	\vspace*{\fill}
	
	{\Large Rīga, \the\year}
\end{titlepage}

\begin{titlepage}
	\centering
	\doublespacing
	{\Large \textbf{Rīgas Tehniskā Universitāte}}
	
	{Elektrotehnikas un vides inženierzinātņu fakultāte\\}
	{Industriālās elektronikas un elektrotehnikas institūts\\}
	{Industriālās elektronikas un elektrotehnoloģiju katedra\par}
	\vspace{2cm}
	
	\onehalfspacing
	{\Large \textbf{\authorName}\\}
	Profesionālā bakalaura adaptronikas studiju programmas students,\\
	stud. apl. nr. \authorId
	\vspace{2cm}
	
	{\huge \textbf{18650 tipa bateriju elementu ietilpības pētīšanas iekārtas izpēte un izstrāde}\par}
	
	\doublespacing
	{\Large\textbf{Bakalaura darbs ar projekta daļu}\par}
	\onehalfspacing
	\vspace{6cm}
	
	\raggedleft
	Zinātniskais vadītājs\\
	RTU IEEI pētnieks\\
	\doublespacing
	{\Large Kristaps Vītols}
	
	\centering
	\vfill
	Rīga, \the\year
\end{titlepage}

\begin{titlepage}
	\centering
	\vspace*{\fill}
	{\Large\textbf{Vieta darba uzdevumam}}
	\vspace*{\fill}
\end{titlepage}

\begin{titlepage}
	\centering
	\vspace*{\fill}
	{\Large\centering\textbf{Vieta komisijas lapai}}
	\vspace*{\fill}
\end{titlepage}

\onehalfspacing
\FloatBarrier
\newpage
\setcounter{page}{4} %Manually set page counter because titlepage resets it
\section*{\MakeUppercase{Anotācija}}

\newpage

\section*{\MakeUppercase{Abstract}}

\newpage
\tableofcontents

\newpage
\addcontentsline{toc}{section}{\texorpdfstring{\MakeUppercase{Ievads}}{Ievads}}
\section*{\texorpdfstring{\MakeUppercase{Ievads}}{Ievads}}

\FloatBarrier
\newpage
\section{\texorpdfstring{\MakeUppercase{Baterijas}}{Baterijas}}

Baterija ir viena vai vairākas virknē slēgtas elektroķīmiskās šūnas.
Baterijas galvenokārt var iedalīt divās grupās - primārajās un sekundārajās.
Primārās jeb vienreizējās lietošanas baterijas var tikt izmantotas (izlādētas) tikai vienu reizi, jo izlādes gaitā elektrods tiek neatrgiežami bojāts.
Savukārt sekundārās jeb uzlādējamās baterijas pēc izlādes ir iespējams vairākkārt uzlādēt pievienojot ārēju barošanas avotu.
Primārajām baterijās parasti ir lielāka specifiskā enerģija, savukārt sekundārajām ir lielāka maksimālā izlādes strāva.

Galvenie bateriju parametri:
\begin{itemize}
	\item Elektrolīta veids
	\item Elektrodu veids
	\item Nominālais, maksimālais un minimālais spriegums
	\item Maksimālā uzlādes/izlādes strāva
	\item Pašizlādes ātrums
	\item Iekšējā presetība
	\item Ietilpība ampērstundās $(Ah)$
	\item C-reitings jeb maksimālā strāva kā koeficients no ampēriem\\ no ietilpības ampērstundās
\end{itemize}

\subsection{Litija jonu baterijas}

Litija jonu baterijas trīs galvenie funckionālie elementi ir pozitīvas un negatīvais elektrods un elektrolīts. 
Parasti negatīvais elektrods tiek izgatavots no grafīta, pozitīvais elektrods no metāla oksīda, bet elektrolīts no litija sāls šķīduma organiskā šķīdinātājā.
Šo bateriju galvenās īpašības ir augsts enerģijas blīvums ($250-693Wh/L$), lēna pašizlāde un atmiņas efekta neesamība.

Litija jonu baterijās elektroķīmiskās reakcijas reaktanti ir anoda un katoda materiāli, kuri abi ir litija atomus saturošas vielas.
Izlādes laikā anoda oksidācijas reakcijas rezultātā rodas pozitīvi lādēti litija joni, negatīvi lādēti elektroni un neitrāls anoda pārpalikums;
joniem pārvietojoties caur elektrolītu un elektroniem caur ārēju shēmu, tie nonāk katodā kur notiek redukcijas reakcija ar katoda materiālu.
Vienādojumā \ref{eq:libcharge} redzama litija kobalta oksīda katoda pus-reakcija, bet \ref{eq:libdischarge} grafīta anoda pus-reakcija.
Kopējā šādas konstrukcijas baterijas reakcija attēlota \ref{eq:libchargecycle}, kur no kreisās uz labo pusi attēlota izlāde, bet pretējā virzienā - uzlāde.
\begin{align}
	\ch{CoO2 + Li+ + e- &<=> LiCoO2}		\label{eq:libcharge} \\
	\ch{LiC6 &<=> C6 + Li+ + e-}			\label{eq:libdischarge} \\
	\ch{LiC6 + CoO2 &<=> C6 + LiCoO2}	\label{eq:libchargecycle}
\end{align}



\subsection{18650 šūnas}

18650 (vai arī 168A) šūnu tipiskā ietilpība ir no 1500 līdz 3500 $mAH$, nominālais spriegums 3.7 $V$,
diametrs 18 $mm$ un garums 65 $mm$.\cite{18650cell}
Lai gan fiziskie izmēri ir standartizēti, šūnām ar izvirzītu pozitīvo termināli var atšķirties izvirzījuma izmēri,
līdz ar to tās var būt nesaderīgas ar ierīcēm.

\subsubsection{Aizsargātas šūnas}

\FloatBarrier
\newpage
\section{\texorpdfstring{\MakeUppercase{Līdzīgas iekārtas}}{Līdzīgas iekārtas}}

\subsection{Industriālas iekārtas}

\subsubsection{Eagle Eye}

\subsubsection{PEC ACT0505} 

\subsubsection{Amperis}

\subsubsection{SBSBattery}

\subsection{Hobija iekārtas}

\subsubsection{SkyRC}

Spēj izlādēt 2-8 virknē slēgtas LiPo/LiFe/LiHv šūnas, 6-23 NiMH/NiCD šūnas vai 6-32V Pb baterijas.
Ir konstantas strāvas un jaudas režīmi, USB savienojums ar Windows programmatūru.

\begingroup
\renewcommand{\arraystretch}{1.25}
\begin{table}[h]
	\caption{SkyRc bateriju izlādes sitēmu parametri} 	
	\label{tab:skyrcdischarge}
	\centering
	\begin{tabularx}{\linewidth}{ 
		>{\setlength\hsize{1\hsize}\centering}X| 
		>{\setlength\hsize{0.3\hsize}\centering}X| 
		>{\setlength\hsize{0.3\hsize}\centering}X| 
		>{\setlength\hsize{0.3\hsize}\centering}X}
		Parametrs								& Mērvienība	& BD200\cite{bd200}		& BD250\cite{bd250}	\tabularnewline
		\hline
		Min. Spriegums							& $V$     		& $5.40$				& $5.40$ 			\tabularnewline
		Max. Spriegums							& $V$     		& $35.00$				& $35.00$			\tabularnewline
		Max. Jauda								& $W$     		& $200$					& $250$				\tabularnewline
		Max. Strāva								& $A$     		& $30$					& $35$				\tabularnewline
		Precizitāte, strāva $< 10A$				& $\pm mA$		& $60$					& $60$				\tabularnewline
		Precizitāte, strāva $> 10A$				& $\pm\%$ 		& $2$					& $3$				\tabularnewline
		Precizitāte, spriegums $< 10V$			& $\pm mV$		& $60$					& $80$				\tabularnewline
		Precizitāte, $10V <$ spriegums $< 20V$	& $\pm mV$		& $120$					& $120$				\tabularnewline
		Precizitāte, spriegums $> 20V$			& $\pm mV$		& $160$					& $160$	
	\end{tabularx}
\end{table}
\endgroup

\subsubsection{RCDischarger}

\clearpage
\section{\texorpdfstring{\MakeUppercase{Izstrādājamās sistēmas analīze}}{Izstrādājamās sistēmas analīze}}

Šunu testēšanas sistēma sastāvēs no viena vadības moduļa un vairākiem tes\-tē\-šanas moduļiem.
Vadības moduļa galvenās funckijas būs testa datu uzkrāšana un katras šūnas testa procesa vadība.
Savukārt testēšanas modulis sastāves no mērīšanas, uzlādes un izlādes moduļiem. Mērīšanas moduļi mērīs baterijas parametrus (spriegumu, strāvu un temperatūru), kā arī pieslēgs vai atvienos uzlādes un izlādes moduļus no baterijas.
Vadības modulis komunicēs ar mērīšanas moduļiem, kuri savukārt komunicēs ar attiecīgajiem uzlādes un izlādes moduļiem. 

% Vai šim paragrāfam jābūt pie teorijas vai prakses?
Testēšanas moduļi tiks slēgti paralēli, līdz ar to to skaitu ierobežos tikai izvēlētais komunikācijas protokols un tā ātrums.
Divi iespējamie komunikācijas protokoli ir I\textsuperscript{2}C (Inter-Integrated Circuit) un SPI (Serial Peripheral Interface) daisy-chain konfigurācijā.
I\textsuperscript{2}C komunikācija notiek starp vienu master un vienu slave ierīci master ierīcei norādot slave ierīces adresi.
I\textsuperscript{2}C nepieciešami tikai divi savienojumi (SCL un SDA), taču maksimālais komunikācijas ātrums ir ierobežots.
SPI daisy-chain konfigurācijā komunikācija notiek bīdot informāciju caur visām virknē slēgtajās ierīcēm. Salīdzīnājumā ar I\textsuperscript{2}C, SPI nepieciešami trīs savienojumi (SCK, MOSI, MISO), taču maksimālais komunikācijas ātrums ir daudzreiz lielāks nekā I\textsuperscript{2}C.

\subsection{Vadības modulis}

\begin{figure}[h]
	\centering
	\begin{tikzpicture}
		\node [block] (controller) {Vadības modulis};
		\node [io, above left=of controller] (input) {Konfigurācija};
		\node [io, above right=of controller] (output) {Rezultāti};
		\node [block, below left=of controller] (test1) {Testēšanas modulis 1};
		\node [block, below=of controller] (test) {...};
		\node [block, below right=of controller] (testn) {Testēšanas modulis n};		
				
		\draw [<-] (controller) -- (input);
		\draw [->] (controller) -- (output);
		\draw [<->] (controller.west) -| (test1.north);
		\draw [<->] (controller.south) -- (test.north);
		\draw [<->] (controller.east) -| (testn.north);
	\end{tikzpicture}
	\caption{Testēšanas sistēma}
\end{figure}

Vadības modulim jānodrošina piekļuve izmantojot tīklu Ethernet.
Tas saņems testa konfigurāciju, kurā būs norādīti tādi bateriju šūnu testēšanas parametri, kā uzlādes spriegums, izlādes spriegums un strāva un ciklu skaits.
Testa gaitā vadības modulis nepieciešamajā laikā nodod komandas katram testēšanas modulim, kā arī periodiski saglabā mērījumu datus no testēšanas moduļiem.
Testa beigas jabūt iespējamam no vadības moduļa saņemt visus testa gaitā iegūtos datus.

\subsection{Mērīšanas modulis}

\begin{figure}[h]
	\centering
	\begin{tikzpicture}
		\node [block] (mea1) {Mērīšanas modulis};
		\node [io, above left=of mea1] (input) {Komandas};
		\node [io, above right=of mea1] (output) {Mērījumi, statuss};
		\node [block, below=of mea1] (bat1) {Testējamā šūna};
		\node [block, right=of bat1] (disc1) {Izlādes modulis};
		\node [block, left=of bat1] (charge1) {Uzlādes modulis};
		
		\draw [<-] (mea1) -- (input);
		\draw [->] (mea1) -- (output);
		\draw [<-] (mea1.south) -- (bat1.north);
		\draw [<->] (mea1.west) -| (charge1.north);
		\draw [<->] (mea1.east) -| (disc1.north);
		\draw [->] (bat1.east) -- (disc1.west);
		\draw [<-] (bat1.west) -- (charge1.east);
	\end{tikzpicture}
	\caption{Testēšanas modulis}
\end{figure}

Mērīšanas modulis kontrolē katras šūnas uzlādes un izlādes sākšanu/beigšanu, kā arī mēra sekojošus šūnas parametrus:
\begin{itemize}
	\item spriegumu diapazonā $0.00-4.50\pm0.01 V$;
	\item strāvu diapazonā $0.00-20.00\pm0.05 A$;
	\item temperatūru diapazonā $0.0-100.0\pm0.1\degree C$.
\end{itemize}

\subsection{Izlādes modulis}

Sākuma spriegums līdz $4.35V$, iestādāms beigu spriegums $2.50-4.35 V$.
Maksimālā izlādes strāva $20(10) A$, jauda $80(40) W$.
Sprieguma, strāvas un temperatūras vērtības tiks nolasītas no mērīšanas moduļa. 
Releji, lai būtu iespējams fiziski atvienot izlādes moduli no baterijas tādejādi samazinot tā ietekmi uz mērījumim kamēr tas netiek izmantots.

\subsection{Uzlādes modulis}

Ieteicams izmantot IC. Vienas šūnas uzlādes IC ir paradzēti uzlādei no USB, tāpēc ieejas spriegums ir $+5VDC$. USB PD standartiem atbilstoši lādētājiem ir arī ieejas līdz $+22VDC$, bet tam nepieciešama papildu konfigurācija izmantojot USB D+/D-, I2C vai rezistorus. Releji, lai būtu iespējams fiziski atvienot izlādes moduli no baterijas tādejādi samazinot tā ietekmi uz mērījumim kamēr tas netiek izmantots.

Parametri:
\begin{itemize}
	\item Iestādāma maksimālā uzlādes strāva līdz 3.5 $A$ (?) %TODO 3.5Ah @ 1C max?
	\item Iestādāms maksimālais spriegums līdz $4.35 V$
\end{itemize}


\FloatBarrier
\newpage
\section{\texorpdfstring{\MakeUppercase{Sistēmas izstrāde}}{Sistēmas izstrāde}}

\subsection{Vadības modulis}

\subsection{Mērīšanas modulis}

\subsection{Izlādes modulis}

\subsection{Uzlādes modulis}

\FloatBarrier
\newpage
\section{\texorpdfstring{\MakeUppercase{Ierīces specifikācija un\newline ietekmes uz vidi novērtējums}}{Ierīces specifikācija un ietekmes uz vidi novērtējums}}


\FloatBarrier
\newpage
\section{\texorpdfstring{\MakeUppercase{Secinājumi}}{Secinājumi}}

\FloatBarrier
\newpage

%TODO Fix hyperlink
\addcontentsline{toc}{section}{\texorpdfstring{\MakeUppercase{Izmantotā literatūra}}{Izmantotā literatūra}}
\section*{\texorpdfstring{\MakeUppercase{Izmantotā literatūra}}{Izmantotā literatūra}}
\printbibliography[heading=none]

\FloatBarrier
\newpage
\vspace*{\fill}

%TODO Fix hyperlink
\addcontentsline{toc}{section}{\texorpdfstring{\MakeUppercase{Pielikumi}}{Pielikumi}}
\section*{\centering\texorpdfstring{\MakeUppercase{Pielikumi}}{Pielikumi}}

\vspace*{\fill}
\FloatBarrier
\newpage

\subsection*{1. Pielikums}

\end{document}
